{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"<p>Matchbox is an open source initiative to support testing and implementation of FHIR-based solutions and to map or capture health data into HL7\u00ae FHIR\u00ae ,  the standard for healthcare interoperability. See matchbox.health for more information.</p> <p>Matchbox can be deployed as a microservice in your IT infrastructure or used as a standalone java library.</p> <p>The software is licensed under the business-friendly Apache Software License 2.0 and is based on the HAPI FHIR project. </p>"},{"location":"#changelog","title":"Changelog","text":"<p>Changelog</p>"},{"location":"#main-features","title":"Main Features","text":"<ul> <li>Validation of FHIR implementations</li> <li>Mapping health data to and from FHIR using the FHIR mapping language</li> </ul>"},{"location":"api/","title":"API for Matchbox","text":"<p>Matchbox is a FHIR server based on the hapifhir/hapi-fhir-jpaserver-starter </p> <ul> <li>(pre-)load FHIR implementation guides from the package server for conformance resources (StructureMap, Questionnaire, CodeSystem, ValueSet, ConceptMap, NamingSystem, StructureDefinition). The \"with-preload\" subfolder contains an example with the implementation guides provided for the public test server.</li> <li>validation support: [server]/$validate for checking FHIR resources conforming to the loaded implementation guides</li> <li>FHIR Mapping Language endpoints for creation of StructureMaps and support for the StructureMap/$transform operation</li> <li>SDC (Structured Data Capture) extraction support based on the FHIR Mapping language and Questionnaire/$extract</li> </ul> <p>a public test server is hosted at https://test.ahdis.ch/matchboxv3/fhir with a corresponding gui https://test.ahdis.ch/matchboxv3/</p>"},{"location":"cda/","title":"CDA Logical Model","text":"<p>To convert between CDA and FHIR an Logical Model is needed which can represent the CDA standard within FHIR. This work has been undertaken by HL7 International and is in current development (source, ci-build). ahdis has forked the CDA Logical Model and has made the following changes in the main branch:</p> <ul> <li>Support for IHE PHARM (PharmContent, PharmIngredient, PharmMedicineClass, PharmPackagedMedicine, PharmSpecializedKind, PharmSubstance, PharmSuperContent) and IHE LAB (LabCriterion, LabCondition) extensions</li> <li>Support for Patient.birthTime</li> </ul> <p>CDA logical model, Package package.tgz</p> <p>Note: The CDA-Model is currently built as an FHIR R5 model.</p>"},{"location":"changelog/","title":"Changelog","text":"<p>2024/11/25 Release 3.9.8</p> <ul> <li>Allow providing map and models in the StructureMap $transform operation #305</li> <li>Introduce parameter 'autoInstallMissingIgs' to automatically install IGs from the public registry   #306</li> <li>Introduce the configuration parameter 'devMode' to enable the development environment; it allows installing an    ImplementationGuide by posting its NPM package to the operation $install-npm-package #306</li> <li>Add filtering to the list of StructureMaps in the GUI</li> <li>Move from the hash-based Angular routing to the path-based routing</li> <li>Upgrade hapifhir org.hl7.fhir.core to 6.4.2</li> <li>Upgrade hl7.terminology to 6.1.0 #313</li> </ul> <p>2024/11/13 Release 3.9.7</p> <ul> <li>Upgrade hapifhir org.hl7.fhir.core to 6.4.1</li> </ul> <p>2024/10/24 Release 3.9.6</p> <ul> <li>Remove lucene dependencies #301</li> </ul> <p>2024/10/24 Release 3.9.5</p> <ul> <li>Updated dependencies #301</li> </ul> <p>2024/10/17 Release 3.9.4</p> <ul> <li>Validation: Tutorial for validating FHIR resources with matchbox</li> <li>Validation: add button to copy a direct link to the validation #296</li> <li>Validation: support additional validation parameters #299</li> <li>Validation: Allow validating a resource through the GUI with URL search parameters #288</li> <li>Validation: Terminology: support CodeableConcept in ValueSet/$validate operation #291</li> <li>FML: Use FMLParser in StructureMapUtilities and support for identity transform #289</li> <li>FML: FML transform performance tuning #264 (via @mrunibe)</li> <li>Gazelle reports: add test to ensure https://gazelle.ihe.net/jira/browse/EHS-831 is fixed</li> <li>Upgrade hapifhir org.hl7.fhir.core to 6.3.32</li> </ul> <p>2024/10/07 Release 3.9.3</p> <ul> <li>Gazelle reports: add an information message if there are no other messages #274</li> <li>Additional tx Parameters txLog and txUseEcosystem #281</li> <li>FML: updates to work with fhir-mapping-tutorial #283</li> <li>Container: Create config directory already in base image #284</li> </ul> <p>2024/09/16 Release 3.9.2</p> <ul> <li>Fix security issues #279</li> <li>where clause on alias #278</li> </ul> <p>2024/09/16 Release 3.9.1</p> <ul> <li>Make CORS configurable, default not activated make cors configurable (now activated) #271</li> <li>server API FML transforms between different FHIR versions (R4, R4B, R5) #265, set flag xVersion</li> <li>show a notification on errors in the validation GUI #272</li> <li>ignore info/warnings also in slicing info #273</li> <li>Gazelle validation reports with no issues should pass #274</li> <li>update frontend dependencies</li> <li>provide version-less Gazelle profiles for current packages #276</li> </ul> <p>2024/09/10 Release 3.9.0</p> <ul> <li>initial support for FML transforms between different FHIR versions (R4, R4B, R5) #265, set flag xVersion</li> <li>support for FHIR R4B in engine and server #65</li> <li>upgrade to hapi-fhir 7.4.0 and org.hl7.fhir.core 6.3.24 #267</li> <li>Ignore info/warnings also in slicing info #269</li> </ul> <p>2024/08/13 Release 3.8.10</p> <ul> <li>upgrade graphql to fix CVE-2024-40094</li> <li>Server-Side Request Forgery in axios #117</li> </ul> <p>2024/07/10 Release 3.8.9</p> <ul> <li>add support for dateTime #243</li> <li>fix code editor high-jacking of the search keyboard shortcut (CTRL + f) #260</li> <li>upgrade Tomcat to fix CVE-2024-34750</li> </ul> <p>2024/06/25 Release 3.8.8</p> <ul> <li>validation for 3 letter country codes #259</li> <li>making caching of txServer configurable</li> <li>add support for dateTime #243</li> </ul> <p>2024/06/24 Release 3.8.7</p> <ul> <li>docker image for v3.8.6 not starting up #258</li> </ul> <p>2024/06/24 Release 3.8.6</p> <ul> <li>fhirpath date add/minus with variables in fml #243</li> <li>update to published CDA FHIR logical model with matcbhox patches 2.0.0-sd #241</li> <li>update frontend for high security vulnerabilities #246</li> <li>CH:IPS validation problem #248</li> <li>improved the validation GUI #242, upgraded to angular@18</li> <li>update to hl7.fhir.core 6.3.11 #254</li> <li>fixed validation problems #250,#251,#252</li> <li>enable Terminology Caching #257</li> </ul> <p>2024/06/14 Release 3.8.5</p> <ul> <li>Exception when using internal terminology server #236</li> <li>Extension profiles are not shown for validation anymore #237</li> <li>Ignore suppressWarnInfo Version independent #239</li> </ul> <p>2024/05/27 Release 3.8.4</p> <ul> <li>R5 validation problem from EVS Client #234</li> <li>IPS validation with unknown extensions should not give an error #233 </li> <li>Only download NPM package from localhost or ci-build if already installed in container #232</li> </ul> <p>2024/04/29 Release 3.8.3</p> <ul> <li>profile validation with different ig version issues, GUI &amp; EVS Client #225</li> <li>improved the profile selection in the validation GUI</li> <li>FML: Side effect exception when updating a StructureMap #227</li> </ul> <p>2024/04/22 Release 3.8.2</p> <ul> <li>Improvements in the Gazelle validation API</li> <li>Upgrade to Spring 6.1.6 to fix CVE-2024-22262</li> <li>Fix CVE-2023-4043</li> <li>Upgrade to HAPI FHIR 7.0.2 and org.hl7.fhir.core 6.3.5 #222</li> </ul> <p>2024/04/09 Release 3.8.1</p> <ul> <li>update to latest cda logical model 2.0.0-sd-snapshot1 (CDA Serialization issue) #196</li> <li>adapt the simple terminology server to the new API #217</li> <li>loading of ig's in dev mode into engine #219</li> <li>upgrade to JDK 21 (LTS)</li> <li>Path traversal in webpack-dev-middleware #221</li> </ul> <p>2024/03/19 Release 3.8.0</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.8.0</code></li> <li>update to fhir.core.version 6.3.2 #210</li> <li>support for target CDA observation.value as xsi:type CS #205</li> <li>update to latest cda logical model 2.0.0-sd-snapshot1 (Note: breaking changes for existing CDA to FHIR maps, see details in issue) #196</li> <li>Update to Spring 6.1.5 to fix CVE-2024-22259</li> <li>Update to Tomcat 10.1.19 to fix CVE-2024-24549</li> <li>Update frontend dependencies</li> <li>Fixed invalid imports in FhirPathR4 #5</li> </ul> <p>2024/03/07 Release 3.7.0</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.7.0</code></li> <li>Implemented the new Gazelle validation API #141</li> <li>Fixed some validation GUI issues #207</li> <li>Renamed the keyword \"current\" to \"last\" for Implementation Guide versions #206</li> <li>Added support for R5 #55</li> <li>Fixed an XXE vulnerability in the XmlParser #45</li> <li>Upgraded to HAPI FHIR 7.0.1</li> </ul> <p>2024/02/28 Release 3.6.1</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.6.1</code></li> <li>Fixed support for the date format <code>YYYYMMDDHHMMSS.UUUU[+|-ZZzz]</code> #202</li> </ul> <p>2024/02/27 Release 3.6.0</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.6.0</code></li> <li>Upgraded to HAPI FHIR 7.0.0 and org.hl7.fhir.core 6.1.2.2 #191</li> <li>Added matchbox validation API tests #193</li> </ul> <p>2024/01/31 Release 3.5.4</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.5.4</code></li> <li>The application now stops if it fails to load an IG, instead of continuing running without an engine #171</li> <li>GUI: improved the validation interface #177</li> <li>Dependency upgrade to fix various security issues (see https://github.com/ahdis/matchbox/security/dependabot and    https://github.com/ahdis/matchbox/security/code-scanning)</li> <li>Added security scanners for the Java code, Java dependencies and Docker image</li> </ul> <p>2024/01/05 Release 3.5.3</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.5.3</code></li> <li>Updated <code>hl7.terminology</code> from 5.3.0 to 5.4.0 #174</li> <li>Prevented initializing a matchbox engine in <code>only_load_packages</code> mode #172</li> <li>Fixed the issue count in validation results #173</li> <li>Improved the validation interface</li> <li>GUI: updated to Angular 17</li> </ul> <p>2023/12/27 Release 3.5.2</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.5.2</code></li> <li>IG ballot versions are not considered \"current\" if the same version, non-balloted is also loaded #168</li> <li>Removed wrong warning about R5 specials not being loaded #167</li> <li>Fixed loading of hl7.terminology #166</li> <li>Added onlyOneEngine and httpReadOnly flags to the validation OperationOutcome #164</li> <li>Implemented feature to suppress warning/information-level issues from validation result #163</li> <li>Fixed configuration of the terminology server when onlyOneEngine mode is used #160</li> <li>Improved common error messages about engine malfunctions #159</li> <li>Improved waiting loop for the validation engine initialization (you should not get the \"engine not ready\" error    message anymore)</li> <li>Reworked exception handling and logging in the validation engine</li> <li>Updated the validation OperationOutcome to include more information, the GUI was also updated</li> </ul> <p>2023/12/11 Release 3.5.1</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.5.1</code></li> <li>The terminology system advertises support for more code systems</li> </ul> <p>2023/12/08 Release 3.5.0</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.5.0</code></li> <li>Upgraded to HAPI FHIR 6.10.0 and Core 6.1.16</li> <li>Implemented an HTTP read-only mode #158</li> <li>Implemented a simple terminology server for offline validation #152</li> <li>Upgraded logback to fix CVE-2023-6378</li> <li>Fixed a bug in package loading on Windows filesystem</li> </ul> <p>2023/10/05 Release 3.4.5</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.4.5</code></li> <li>CDA Logical Model update for xsi-type ST #145</li> </ul> <p>2023/10/03 Release 3.4.4</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.4.4</code></li> <li>CDA Logical Model update for xsi-type ST #145</li> <li>update hl7.terminology package from 5.1.0 to 5.3.0 #146</li> <li>Validation: Upload of new IG over API does not configure it for validation #144</li> </ul> <p>2023/09/20 Release 3.4.3</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.4.3</code></li> <li>FML: Contained ConceptMap in StructureMap does not work for transformation #137</li> <li>FML: POST / PUT for StructureMap should return HTTP error code 404 instead of 200 in deployment mode #133</li> <li>FHIR Validation problem with not support R5 extensions #135</li> <li>FHIR Validation Errors for display values should only be warnings #132</li> <li>GET all and query for url is not working in development mode #129</li> <li>matchbox app assumed matchboxv3 as the app location #128</li> <li>FHIR R4 validation error with cross version Extension for R5 #138</li> </ul> <p>2023/09/05 Release 3.4.2</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.4.2</code></li> <li>Query all conformance resources by type #129</li> </ul> <p>2023/09/04 Release 3.4.1</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.4.1</code></li> <li>development mode to create conformance resources #125</li> <li>matchbox version in capability statement matchbox#126</li> </ul> <p>2023/08/30 Release 3.4.0</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.4.0</code></li> <li>Updated to HAPI FHIR 6.8.0 and Core 6.0.22</li> <li>Added support for custom paths with the filesystem package cache manager</li> </ul> <p>2023/08/09 Release 3.3.3</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.3.3</code></li> <li>Upgraded Jackson to allow parsing longer JSON documents</li> </ul> <p>2023/08/09 Release 3.3.2</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.3.2</code></li> <li>Increased the max heap to 2.5 giga to allow loading more IGs</li> </ul> <p>2023/07/27 Release 3.3.1</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.3.1</code></li> <li>Updated to HAPI FHIR 6.6.2</li> <li>GUI: updated to Angular 16</li> <li>Fix hl7#terminology version in MatchboxEngineSupport</li> <li>GUI: all IGs are now showing, fixes #119</li> <li>GUI: remove the backend URL field, fixes #84</li> <li>Improve the MatchboxEngineBuilder, fixes #113</li> <li>Prepare for R4B/R5 support</li> </ul> <p>2023/07/10 Release 3.3.0</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.3.0</code></li> <li>Updated to Core 6.0.1 and hapi-fhir 6.6.0</li> <li>Updated to hl7#terminology 5.1.0</li> <li>Loaded hl7.fhir.uv.extensions.r4 1.0.0</li> <li>Improved testing</li> </ul> <p>2023/05/15 Release 3.2.3</p> <ul> <li><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.2.3</code></li> <li>fix validation engine caching mechanism</li> </ul> <p>2023/05/08 Release 3.2.2</p> <ul> <li>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.2.2</li> <li>dependency upgrade (core 5.6.971, HAPI 6.4.4, Spring 5.3.27, Spring Boot 2.7.11)</li> <li>replaced IgLoaderFromClassPath with #loadPackage()</li> </ul> <p>2023/04/05 Release 3.2.1</p> <ul> <li>docker pull \\    europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.2.1</li> <li>reenable proxy support for downloading packages</li> <li>update to core 5.6.116</li> </ul> <p>2023/03/06 Release 3.2.0</p> <ul> <li>updated CDA core logical model 2.0 and added tests</li> <li>docker multiarchitecture support and ci-build setup #76</li> <li>proxy support for downloading packages, thanks @ValentinLorand for your PR, #76</li> <li>matchbox-server: disable caching for specific engines / implementation guides #77</li> <li>update to core 5.6.100 and hapi-fhir 5.4.1 for r4 and r5 maps support #81</li> </ul> <p>2023/02/01 Release 3.1.0</p> <ul> <li>Reenable FHIR Mapping Language tutorial, xml and json issues with matchbox #51</li> <li>Enable create and update on conformance resources #70, valid for 60 minutes (not persisting)</li> <li>GUI: more intuitive order for validation #69</li> <li>GUI: paged ig's page does not work #67</li> <li>Update to https://github.com/hapifhir/org.hl7.fhir.core/releases/tag/5.6.92 and hapi-fhir 6.2.5</li> <li>validation difference to HL7 FHIR validator #71: only selected ig (and dependencies) for selected canonical will be used for validation if configured on matchbox (including no dynamic loading of packages depending on meta.profile)</li> <li>spurios validation erros with package validation #72</li> <li>Fixed package configuration, not loading additional ig / conformance resources #71</li> <li>loading IG from package by filepath does not work #26</li> <li>base release with no ig's configured: docker pull eu.gcr.io/fhir-ch/matchbox:v313</li> </ul> <p>2023/01/16 Release 3.0.0</p> <ul> <li>Update to https://github.com/hapifhir/org.hl7.fhir.core/releases/tag/5.6.88</li> <li>Extracting matchbox-engine out of matchbox for validation and transformation with standalone validation engine</li> <li>CDA transformation: Updating to latest CDA Core 2.0 logical model with lab/pharm additions, package</li> <li>matchbox-server for validation and transformation but not storage of FHIR resources</li> <li>cda to fhir: decimal in cda allows spaces #62</li> <li>Mapping of xmlText fails #61</li> <li>removing questionnaire viewer and mobile access gateway gui</li> </ul> <p>2022/09/11 Release 2.4.0</p> <ul> <li>hapi-fhir 6.2.0 and org.hl7.fhir.core 5.6.43</li> <li>update mobile access</li> <li>ihe.iti.pmir#1.5.0 cannot be uploaded to matchbox #59: removed Subscription from resources to import</li> <li>show all cda2fhir and fhir2cda maps #58</li> <li>hapi.fhir.version: 6.2.0-PRE5-SNAPSHOT and fhir.core.version 5.6.65</li> </ul> <p>2022/07/11 Release 2.3.0</p> <ul> <li>favicon fixed #53</li> <li>add possiblity to add a static file location #57</li> </ul> <p>2022/06/08 Release 2.2.0</p> <ul> <li>FHIR Mapping Language tutorial, xml and json issues #51</li> <li>base release with no ig's configured: docker pull eu.gcr.io/fhir-ch/matchbox:v220</li> </ul> <p>2022/05/25 Release 2.1.0</p> <ul> <li>hapi-fhir 6.0.0 and org.hl7.fhir.core 5.6.43</li> <li>Validation: CapabilityStatement caching fixed #43</li> <li>prototype SDC $assembly operation #46</li> <li>Enable SDC extraction with unknown ValueSets #48</li> <li>Patch for FHIR Mapping Language: funcMemberOf/resolveValueSet: Not Implemented Yet #49</li> <li>validation without terminology server and with hl7.terminology #50</li> <li>base release with no ig's configured: docker pull eu.gcr.io/fhir-ch/matchbox:v210</li> </ul> <p>2022/04/28 Release 2.0.0</p> <ul> <li>version of ig, validator and matchbox should be provided in the validation report #40</li> <li>hapi-fhir 6.0.0-PRE10-SNAPSHOT and org.hl7.fhir.core 5.6.43</li> <li>allow xml in gui for validation #38</li> <li>mobile access gateway gui: prefix DocumentEntry.identifier with urn:uuid in GUI #41</li> <li>base release with no ig's configured: docker pull eu.gcr.io/fhir-ch/matchbox:v200</li> </ul> <p>2022/03/21 Release 1.9.1</p> <ul> <li>custom log banner, thanks ralych</li> <li>Fixed StructureMap transformation issue core and issue#37</li> </ul> <p>2022/03/10 Release 1.9.0</p> <ul> <li>Updated to hap-fhir 5.7.0, fhir.core.version (validator) 5.6.27</li> <li>Extended Mobile Access Gateway support for PMP (replacing FHIR documents with selected Patient in Mobile Access Gateway, transforming to CDA and MDH publish)</li> <li>base release with no ig's configured: docker pull eu.gcr.io/fhir-ch/matchbox:v190</li> <li>docker-compose setup for postgres and for postgres and swiss igs</li> </ul> <p>2022/02/21 Release 1.8.2</p> <ul> <li>OAuth integration for Mobile Access Gateway in webapp</li> </ul> <p>2022/02/21 Release 1.8.1</p> <ul> <li>Parsing of bundles adds additional contained resources [#11|(https://github.com/ahdis/matchbox/issues/11)</li> </ul> <p>2022/02/08 Release 1.8.0</p> <ul> <li>Integrate webapp running on matchbox port and root itself #35</li> <li>NPM can be downloaded with Accept:application/gzip on Implementation Guide Resource</li> </ul> <p>2022/01/13 Release 1.7.1</p> <ul> <li>JSON POST Requests have a size limit (filler issue) #33</li> <li>FHIRPathEnginge construction is expensive #31</li> <li>SNOMED CT Code validation problem for Quantity in Medication.amount #30</li> <li>Validation: Uploaded StructureDefinitions via NPM are not available in same session for $validate #29</li> <li>StructureMap transformation: Bundle request element not correctly ordered #27</li> <li>Error on release V1.6.0 #24, thanks @delcroip</li> <li>Integrated PR and PR for translate in Structure Map, thanks @aralych</li> <li>base release with no ig's configured: docker pull eu.gcr.io/fhir-ch/matchbox:v171</li> </ul> <p>2022/01/04 Release 1.6.0</p> <ul> <li>extend FHIR API based on Implementation Guide NPM packages #23</li> <li>add spring actuator for health checks #22</li> <li>disable special questionnaire validation #21</li> <li>base release with no ig's configured: docker pull eu.gcr.io/fhir-ch/matchbox:v160</li> </ul> <p>2021/12/17 Release 1.5.0</p> <ul> <li>updated hapi-fhir to 5.6.0</li> <li>patched slicing validation problems in bundle</li> <li>activated $expand operation on ValueSet</li> <li>base release with no ig's configured: docker pull eu.gcr.io/fhir-ch/matchbox:v150</li> </ul> <p>2021/09/14 Release 1.4.0</p> <ul> <li>updated hapi-fhir to 5.5.1, no more dependencies on forked packages</li> <li>$extract on QuestionnaireResponse for StructureMap based extraction</li> <li>support for the $transform operation for StructureMap</li> <li>FHIR Mapping Language Support (POST FHIR Mapping language, transform)</li> <li>fixed issues #7 and #8 (custom SearchParmeters and validation)</li> <li>public test instance https://test.ahdis.ch/matchbox/fhir</li> <li>base release with no ig's configured: docker pull eu.gcr.io/fhir-ch/matchbox:v140</li> <li>swiss epr release: docker pull eu.gcr.io/fhir-ch/matchbox-swissepr:v140</li> </ul> <p>2021/07/05 Release 1.3.0</p> <ul> <li>updated hapi-fhir to 5.5.0-PRE5-SNAPSHOT with patches for hapi-fhir and org.hl7.fhir.core (dev branch on ahdis foreach project)</li> <li>updated swiss epr implementation guides to STU2 Ballot</li> <li>renamed project to matchbox-validator</li> <li>base release with no ig's configured: docker pull eu.gcr.io/fhir-ch/matchbox-validator:v130</li> <li>swiss epr release: docker pull eu.gcr.io/fhir-ch/matchbox-validator-swissepr:v130</li> <li>testsystem endpoint for siwssepr validator: https://test.ahdis.ch/matchbox-validator/fhir</li> </ul> <p>2020/12/23 Release 1.2.0</p> <ul> <li>updated hapi-fhir to 5.2.0</li> <li>updated ch-epr-mhealth to 0.1.2</li> <li>Release is available here:   docker pull eu.gcr.io/fhir-ch/hapi-fhir-jpavalidator:v120</li> </ul> <p>2020/10/22 Release 1.1.0</p> <ul> <li>updated hapi-fhir to (21.10.2020) and spring-boot</li> <li>updated fhir.core.version 5.1.15, later is not yet possible due to class name changes</li> <li>fixed EHS-439 added testcase for EHS-439 to verify correct behaviour with fhir.core.version 5.1.15 https://github.com/hapifhir/org.hl7.fhir.core/releases/tag/5.1.15</li> <li>fixed Parameters evaluation two different versions for calling the $validate operation: with Parameters resource and containing the resource to validate within as additional name \"resource\" parameter   with Resource to validate directly according to 7.5.5 Asking a FHIR Server</li> <li>fixed EHS-431 Validator crashes and does not give a result if the JSON starts with a [ ] (square bracket).</li> <li>fixed EHS-419 warning instead of crash for Byte order mark in validation request</li> <li>changed docker build: ig's will be installed during docker build process, no connection to the internet is needed for validation</li> <li>Validation Test Suite for all examples in the loaded ig's checking that they can be validated with no errors with the $validate operation</li> <li>Validation Test Suite with hapi-fhir-client for individual examples</li> <li>Experimental: Validation Test Suite based on on fhir-testcases (only R4, no test-cases from ig's, valuesets or with profiles yet)</li> </ul> <p>2020/09/02 Release 1.0.0</p> <ul> <li>system level $validate operation for $ig's</li> <li>based on hapi-fhir-jpaserverstarter 5.1.0</li> </ul>"},{"location":"docker/","title":"Matchbox container","text":"<p>if you have the rights you can download Matchbox as a docker container:</p> <pre><code>docker pull europe-west6-docker.pkg.dev/ahdis-ch/ahdis/matchbox:v3.8.1\n</code></pre>"},{"location":"docker/#configurable-base-image","title":"Configurable base image:","text":"<pre><code>docker run -d --name matchbox -p 8080:8080 -e matchbox.fhir.context.onlyOneEngine=true -v /Users/oliveregger/apps/:/apps/ matchbox\n</code></pre> <p>Server will then be accessible at http://localhost:8080/matchboxv3/fhir/metadata.</p> <p>The local volume /Users/oliveregger/apps/ will be mapped inside the container and Matchbox will serve the content if is requested via http://localhost:8080/matchboxv3/apps/ (allows you to add own html apps).</p> <p>The last parameter is to set development environment, which allows you to create/update conformance resources (e.g. transform StructureMaps). If not provided, you need to provide the conformance resources by an FHIR Implementation Guide.</p> <p>We recommend to put at least 2.5 GB of RAM for the container instance, depending on how many ImplementationGuides's you plan to install and want to use.</p>"},{"location":"docker/#live-and-readyness-checks","title":"Live and Readyness checks","text":"<p>To check if the container is live and ready you can check the health:</p> <pre><code>GET https://test.ahdis.ch/matchboxv3/actuator/health HTTP/1.1\nAccept: application/vnd.spring-boot.actuator.v3+json\n\nHTTP/1.1 200\nContent-Type: application/vnd.spring-boot.actuator.v3+json\nTransfer-Encoding: chunked\nDate: Thu, 02 Feb 2023 15:55:12 GMT\nVia: 1.1 google\nAlt-Svc: h3=\":443\"; ma=2592000,h3-29=\":443\"; ma=2592000\nConnection: close\n\n{\n  \"status\": \"UP\",\n  \"groups\": [\n    \"liveness\",\n    \"readiness\"\n  ]\n}\n</code></pre> <p>You can also use actuator/health/liveness or actuator/health/readiness.</p> <p>To check the amount of memory used by the jvm use: /actuator/metrics/jvm.memory.used</p>"},{"location":"docker/#using-docker-compose-with-a-persistent-postgresql-database","title":"Using docker-compose with a persistent postgreSQL database","text":"<p>To use docker-compose with Matchbox you need to checkout Matchbox from github.</p> <p>The database will be stored in the \"data\" directory. The configuration can be found in the \"with-postgres\" directory or in the \"with-preload\" directory.</p> <p>Change to either with-posgres directory or the with-preload directory</p> <p>For the first time, you might need to do</p> <pre><code>mkdir data\ndocker-compose up matchbox-db\n</code></pre> <p>that the database gets initialized before Matchbox is starting up (needs a fix)</p> <pre><code>docker-compose up\n</code></pre> <p>Matchbox will be available at http://localhost:8080/matchboxv3/fhir Matchbox-gui will be available at http://localhost:8080/matchboxv3/#/</p> <p>Export the DB data:</p> <pre><code>docker-compose exec -T matchbox-test-db pg_dump -Fc -U matchbox matchbox &gt; mydump\n</code></pre> <p>Reimport the DB data:</p> <pre><code>docker-compose exec -T matchbox-test-db pg_restore -c -U matchbox -d matchbox &lt; mydump\n</code></pre>"},{"location":"docker/#configure-a-own-docker-image-with-preinstalled-packages","title":"Configure a own docker image with preinstalled packages","text":"<p>During a regular container startup all implementation guides will be deployed to the database. This packages can be provided by the</p> <ol> <li>fhir package servers</li> <li>absolute http address to package</li> <li>classpath</li> <li>filesystem</li> </ol> <p>If you want to prepare a container which does not need internet access during the startup (required by 1 and 2) you can build a new container image will do the download and installation packages already during the startup process (adding this line into the Dockerfile):</p> <pre><code>RUN java -Xmx1G -Xms1G -jar /matchbox.jar --hapi.fhir.only_install_packages=true\n</code></pre>"},{"location":"features/","title":"Features","text":""},{"location":"features/#validation-of-fhir-implementations","title":"Validation of FHIR implementations","text":"<p>Need to test your FHIR implementation for correctness? FHIR implementation guides have different requirements on your implementation. From country-specific adaptations (e.g. Swiss FHIR specifications), to requirements for specific use cases like the International Patient Summary (IPS), or your own organization\u2019s internal FHIR implementation guide. You can configure Matchbox to meet your requirements, and validate your FHIR resources directly with an API during testing or in production. Validation is based on the HL7 Java reference validator in accordance with the provided terminologies. An external or internal terminology server can also be configured, and you can validate your implementation through the FHIR API or through a simple GUI. Matchbox can also be integrated with EVS Client, the validation tool from IHE that is used during Connectathons.</p> <p>Customized matchbox containers can be created with the following features for integration or production validation:</p> <ul> <li>configure your container directly with the ig's you validate against, no callout to an external package server is necessary</li> <li>ig's can be preloaded and cached in memory to ensure fast validation if the container is ready</li> <li>use the internal terminology server of matchbox to be independent of the availability of an external terminology server or configure an own terminology server</li> <li>the HL7 Java reference validator version is fixed per matchbox version and specified in the results</li> <li>warnings and information outcomes can be configured to be ignored</li> </ul>"},{"location":"features/#mapping-health-data-to-and-from-fhir-using-the-fhir-mapping-language","title":"Mapping health data to and from FHIR using the FHIR mapping language","text":"<p>Need to map your health data into FHIR and want to share your mapping to FHIR in a re-usable way? The FHIR mapping language allows you to define mapping in a text representation and transform them to FHIR StructureMap resources. Those resources can then be provided in FHIR implementation guides. Matchbox applies the mapping to your own data to create FHIR-compatible data sets. It also checks that the mapping conforms with the included validation stack. In Switzerland, this approach is tested with mapping between CDA and FHIR exchange formats for medication (CDA-FHIR-Maps).</p>"},{"location":"features/#structured-data-capture-sdc-questionnaire-support-for-data-extraction-with-the-fhir-mapping-language","title":"Structured Data Capture (SDC) Questionnaire support for data extraction with the FHIR Mapping Language","text":"<p>SDC (Structured Data Capture) extraction support based on the FHIR Mapping language and preliminary support for assemble of modular questionnaires.</p>"},{"location":"features/#development-mode","title":"Development mode","text":"<p>The development mode can be enabled with the configuration property <code>matchbox.fhir.context.devMode</code>.</p> <p>The following features are available when enabling the development mode.</p>"},{"location":"features/#installing-an-npm-package-through-an-operation","title":"Installing an NPM package through an operation","text":"<p>The operation $install-npm-package allows you to install an NPM package through the API.</p> Parameter IN Card Description name 1..1 The name of the package. version 1..1 The version of the package. body 1..1 The content of the NPM package as HTTP body <p>```http request POST /matchboxv3/fhir/$install-npm-package?name=ch.fhir.ig.ch-core&amp;version=4.0.1 Content-Type: application/gzip</p> <p> ```"},{"location":"matchbox-engine/","title":"Matchbox Engine","text":"<p>Matchbox engine has been created to allow a standalone FHIR validation and transformation without the need for a connection to the internet:</p> <ul> <li>java library</li> <li>supports CDA to FHIR mapping</li> <li>FHIR validation with no external terminology server</li> <li>local configuration (no internet access necessary, ig packages can be loaded directly from classpath)</li> <li>javadoc</li> </ul> <p>default fhir package configuration:</p> <ul> <li>cda-uv-core-2.0#2.0.0-sd-202406-matchbox-patch.tgz</li> <li>hl7.fhir.r4.core.tgz</li> <li>hl7.fhir.xver-extensions#0.1.0.tgz</li> <li>hl7.terminology.r4#6.1.0.tgz</li> <li>hl7.fhir.uv.extensions.r4#1.0.0.tgz</li> </ul>"},{"location":"matchbox-engine/#library-based-on-matchbox-and-hapi-fhir-orghl7fhircore","title":"Library based on matchbox and hapi-fhir / org.hl7.fhir.core","text":"<p>The transformation and validation functionality has been extracted out of matchbox (https://github.com/ahdis/matchbox) into the matchbox-engine (https://github.com/ahdis/matchbox/tree/main/matchbox-engine) library. This has been done in a way, that the matchbox project contains different modules:</p> <pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] Reactor Build Order:\n[INFO]\n[INFO] matchbox                                                           [pom]\n[INFO] matchbox-engine                                                    [jar]\n[INFO] matchbox-server                                                    [jar]\n[INFO]\n[INFO] ----------------------&lt; matchbox.health:matchbox &gt;----------------------\n[INFO] Building matchbox 3.0.0-SNAPSHOT                                   [1/4]\n</code></pre> <p>matchbox-engine creates the java library, matchbox-engine-cli adds all dependencies as a fat jar which can be directly executed (&gt;100 MB) and matchbox-server provides the FHIR API as a microservice. It also uses matchbox-engine, so if matchbox is used during developing and testing the mapping, matchbox-engine will deliver the same result.</p> <p>matchbox-engine is only based on org.hl7.fhir.core libraries (HAPI FHIR - HL7 FHIR Core Artifacts), the dependency to hapi-fhir is not necessary for the library. The library is derived from the HL7 Java FHIR Validator and FHIR Mapping Language implementation. During the development of the mapping a few missing functionalities in the Mapping Language have been discovered and have been also contributed back to the org.hl7.fhir.core project (Pull requests). Note however that there are some classes patched in matchbox-engine because of peculiarities in the parsing/mapping of CDA and package handling (patched files). These patched files are updated and changes applied during each new release of org.hl7.fhir.core and tests are run to verify the correctness of the defined mappings. The library requires JDK11 which is also the minimum requirement for HAPI FHIR - HL7 FHIR Core Artifacts.</p>"},{"location":"matchbox-engine/#integrate-matchbox-engine-with-maven","title":"Integrate matchbox-engine with Maven","text":"<p>You can add the matchbox-engine dependency in your <code>pom.xml</code>:</p> <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;health.matchbox&lt;/groupId&gt;\n    &lt;artifactId&gt;matchbox-engine&lt;/artifactId&gt;\n    &lt;version&gt;3.8.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"matchbox-engine/#api-and-javadoc","title":"API and Javadoc","text":"<p>The source code is documented with Javadoc. Test cases illustrate the main functionality for transformation with the FHIR Mapping Language and for CDA to FHIR transformation.</p> <p>For validation or transformation, you need to instantiate a matchbox-engine. This matchbox-engine can be configured with a specific version of an implementation guide and its dependencies. You can instantiate multiple engines with different ig's.</p>"},{"location":"matchbox-engine/#validation","title":"Validation","text":"<p>Validaton is currently supported for FHIR R4. You can get an instance of matchbox-engine the following way:</p> <pre><code>engine = new MatchboxEngineBuilder().getEngineR4();\n</code></pre> <p>This engine is configured with the core libraries for FHIR Release 4 (hl7.fhir.r4.core.tgz, hl7.fhir.xver-extensions#0.0.13.tgz, hl7.terminology#5.1.0.tgz). You can then invoke the validation with</p> <pre><code>InputStream in = CdaToFhirTransformTests.class.getResourceAsStream(\"/pat.json\");\norg.hl7.fhir.r4.model.OperationOutcome outcome = engine.validate(in,FhirFormat.JSON, \"http://hl7.org/fhir/StructureDefinition/Patient\");\n</code></pre> <p>You have the ability to add additional implementation guides to the engine (e.g. if you wan\u2019t to support validation for your implementation guide). The engine will look for it in the local disk cache or in the remote FHIR package repository.</p> <pre><code>engine.loadPackage(\"ihe.formatcode.fhir\", \"1.0.0\");\n</code></pre> <p>It is possible to load an IG from the content of its NPM package, but its dependencies won't be automatically fetched.</p> <pre><code>engine.loadPackage(getClass().getResourceAsStream(\"/myig.tgz\"));\n</code></pre> <p>You can create also a new instance based on an existing engine. This might be needed if you want to update conformance resources in an instance or if you want to have support for validation with different versions of ig\u2019s (an engine can only be configured with one ig version, there is no support that an engine has two versions of the same ig).</p>"},{"location":"matchbox-engine/#using-the-fhir-mapping-language-for-transformation","title":"Using the FHIR Mapping Language for transformation","text":"<p>If the engine has been configured already with StructureMap resources (e.g. provided within an Implementation Guide) the transformation can be directly called:</p> <pre><code>Resource res = engine.transformToFhir(getFileAsStringFromResources(\"/qr.json\"), true, \"http://ahdis.ch/matchbox/fml/qr2patgender\");\n</code></pre> <p>If you wan\u2019t to provide the StructureMap yourself you can parse a FHIR Mapping Language map file and add the StructureMap resource then to the engine.</p> <pre><code>StructureMap sm = engine.parseMap(getFileAsStringFromResources(\"/qr2patgender.map\"));\nengine.addCanonicalResource(sm);\n</code></pre> <p>For the transformation the canonical Url of the StructureMaps has to be used.</p>"},{"location":"matchbox-engine/#cda-to-fhir-mapping","title":"CDA to FHIR mapping","text":"<p>To support CDA to FHIR mapping (or vice versa) a specific CDAEngine is available, which is configured with CDA Logical Model. To do CDA to FHIR transformations you need to write the mapping logic and provide them as StructureMap resources in an Implementation Guide. </p> <p>You can then load the engine with those maps:</p> <pre><code>engine = new CdaMappingEngine.CdaMappingEngineBuilder().getEngine();\nengine.loadPackage(getClass().getResourceAsStream(\"/cda-fhir-maps.tgz\"));\n</code></pre> <p>And then do the transformation with</p> <pre><code>String result = engine.transform(cda, false, \"http://fhir.ch/ig/cda-fhir-maps/StructureMap/CdaToBundle\", true);\n</code></pre>"},{"location":"packages/","title":"Technical details about the handling of NPM packages","text":""},{"location":"packages/#matchbox-engine","title":"matchbox-engine","text":"<p>When used by itself, the matchbox-engine requires a dedicated directory in the filesystem to store the installed  packages NPM files. This directory can be configured with the <code>MatchboxEngineBuilder.setPackageCacheMode(FilesystemPackageCacheMode)</code> method:</p> Value Directory location on Windows Directory location on other OS USER $user.home/.fhir/packages $user.home/.fhir/packages SYSTEM ProgramData.fhir\\packages /var/lib/.fhir/packages TESTING c:\\temp.fhir\\packages $tmp/.fhir/packages <p>See HAPI's <code>FilesystemPackageCacheManager</code> class for more details about these values.</p> <p>A custom directory location can also be used with the <code>MatchboxEngineBuilder.setPackageCachePath(String)</code> method.</p>"},{"location":"packages/#matchbox-server","title":"matchbox-server","text":"<p>When initiated by matchbox-server, the matchbox-engine is configured with our <code>IgLoaderFromJpaPackageCache</code> IG  loader. Because of that, the resources and packages are stored in the database instead of the filesystem (including all  resources, and the NPM file content itself).</p> <p>This allows serving the original NPM file in the <code>ImplementationGuiderPackageInterceptor</code> class.</p> <p>Then, the loading of IGs in <code>matchbox-engine</code>s is controlled by the server:</p> <ol> <li>When using <code>MatchboxEngineSupport.getMatchboxEngine()</code>, the IG loading is controller by the <code>canonical</code> parameter     and the <code>CliContext.ig</code> property.</li> <li>Otherwise, specific calls to <code>MatchboxEngine.loadPackage()</code> or <code>MatchboxEngine.getIgLoader().loadIg()</code> can be used     to load a specific IG.</li> </ol> <p>In all cases, the IGs are loaded from the database, so make sure they are installed there first.</p>"},{"location":"validation-investigations/","title":"Investigation of the FHIR validator","text":""},{"location":"validation-investigations/#setup","title":"Setup","text":"<p>To build matchbox and matchbox-ch-elm: <pre><code>cd matchbox\nmvn --batch-mode --update-snapshots package -DskipTests -P release\ndocker build --tag \"matchbox:3.4.5.2\" --platform=linux/amd64 --progress=plain --no-cache -f matchbox-server/Dockerfile matchbox-server\ncd ../matchbox-ch-elm\ndocker build --tag \"matchbox-ch-elm:3.4.5.1\" --platform=linux/amd64 --progress=plain --no-cache -f ./Dockerfile .\n</code></pre></p> <p>matchbox-ch-elm is configured with <code>txServer: http://host.docker.internal:18002/eprik-cara/camel/tx/r4/</code>.</p>"},{"location":"validation-investigations/#start-up","title":"Start up","text":"<p>At startup, matchbox makes two HTTP requests to the terminology server: <pre><code>GET http://host.docker.internal:18002/eprik-cara/camel/tx/r4/metadata?_summary=true HTTP/1.1\n</code></pre> which returns a CapabilityStatement that contains supported operations; and:</p> <p><pre><code>GET http://host.docker.internal:18002/eprik-cara/camel/tx/r4/metadata?mode=terminology HTTP/1.1\n</code></pre> which returns a TerminologyCapabilities that seems to contain the list of supported code systems, and expansion parameters.</p> <p>The responsible is <code>SimpleWorkerContext.connectToTSServer()</code>, both resources are put in the <code>txCache</code>.</p>"},{"location":"validation-investigations/#during-validation","title":"During validation","text":"<p>During validation, the library makes a number of requests to the terminology server. The first type is to check the membership of a code in a value set:</p> <p><pre><code>POST http://host.docker.internal:18002/eprik-cara/camel/tx/r4/ValueSet/$validate-code? HTTP/1.1\n</code></pre> <pre><code>{\n  \"resourceType\": \"Parameters\",\n  \"parameter\": [\n    {\n      \"name\": \"coding\",\n      \"valueCoding\": {\n        \"system\": \"http://loinc.org\",\n        \"code\": \"697-3\"\n      }\n    },\n    {\n      \"name\": \"valueSetMode\",\n      \"valueString\": \"CHECK_MEMERSHIP_ONLY\"\n    },\n    {\n      \"name\": \"default-to-latest-version\",\n      \"valueBoolean\": true\n    },\n    {\n      \"name\": \"valueSet\",\n      \"resource\": {\n        \"resourceType\": \"ValueSet\",\n        \"url\": \"http://hl7.org/fhir/uv/ips/ValueSet/results-laboratory-observations-uv-ips--0\",\n        \"version\": \"current\",\n        \"status\": \"active\",\n        \"compose\": {\n          \"include\": [\n            {\n              \"system\": \"http://loinc.org\",\n              \"filter\": [\n                {\n                  \"property\": \"STATUS\",\n                  \"op\": \"=\",\n                  \"value\": \"ACTIVE\"\n                },\n                {\n                  \"property\": \"CLASSTYPE\",\n                  \"op\": \"=\",\n                  \"value\": \"1\"\n                }\n              ]\n            }\n          ]\n        }\n      }\n    },\n    {\n      \"name\": \"cache-id\",\n      \"valueId\": \"5a375c37-d208-4381-b8f7-409926dcf760\"\n    },\n    {\n      \"name\": \"profile\",\n      \"resource\": {\n        \"resourceType\": \"Parameters\",\n        \"parameter\": [\n          {\n            \"name\": \"profile-url\",\n            \"valueString\": \"http://hl7.org/fhir/ExpansionProfile/dc8fd4bc-091a-424a-8a3b-6198ef146891\"\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"mode\",\n      \"valueString\": \"lenient-display-validation\"\n    }\n  ]\n}\n</code></pre> <code>valueSetMode</code> is sometimes set to <code>NO_MEMBERSHIP_CHECK</code>, other times to <code>CHECK_MEMERSHIP_ONLY</code>. It is linked to  enum <code>ValidationOptions.ValueSetMode</code>: <code>ALL_CHECKS, CHECK_MEMERSHIP_ONLY, NO_MEMBERSHIP_CHECK</code>.</p> <p>The response contains the code if it is valid, and an OperationOutcome otherwise: <pre><code>{\n  \"resourceType\": \"Parameters\",\n  \"parameter\": [\n    {\n      \"name\": \"result\",\n      \"valueBoolean\": true\n    },\n    {\n      \"name\": \"system\",\n      \"valueUri\": \"http://snomed.info/sct\"\n    },\n    {\n      \"name\": \"code\",\n      \"valueCode\": \"10828004\"\n    },\n    {\n      \"name\": \"version\",\n      \"valueString\": \"http://snomed.info/sct/900000000000207008/version/20230901\"\n    },\n    {\n      \"name\": \"display\",\n      \"valueString\": \"Positive\"\n    }\n  ]\n}\n</code></pre></p> <pre><code>{\n  \"resourceType\": \"Parameters\",\n  \"parameter\": [\n    {\n      \"name\": \"version\",\n      \"valueString\": \"2.74\"\n    },\n    {\n      \"name\": \"result\",\n      \"valueBoolean\": false\n    },\n    {\n      \"name\": \"message\",\n      \"valueString\": \"The provided code 'http://loinc.org#697-3' is not in the value set 'http://fhir.ch/ig/ch-elm/ValueSet/ch-elm-expecting-specimen-specification--0|1.0.0'\"\n    },\n    {\n      \"name\": \"issues\",\n      \"resource\": {\n        \"resourceType\": \"OperationOutcome\",\n        \"issue\": [\n          {\n            \"severity\": \"error\",\n            \"code\": \"code-invalid\",\n            \"details\": {\n              \"text\": \"The provided code 'http://loinc.org#697-3' is not in the value set 'http://fhir.ch/ig/ch-elm/ValueSet/ch-elm-expecting-specimen-specification--0|1.0.0'\"\n            },\n            \"location\": [\n              \"Coding\"\n            ]\n          }\n        ]\n      }\n    }\n  ]\n}\n</code></pre> <p>The request contains both the code to be checked, and the value set to check it against, as well as some parameters.</p> <p>The second type is to check the validity of a code in a code system:</p> <p><pre><code>POST http://host.docker.internal:18002/eprik-cara/camel/tx/r4/CodeSystem/$validate-code? HTTP/1.1\n</code></pre> <pre><code>{\n  \"resourceType\": \"Parameters\",\n  \"parameter\": [\n    {\n      \"name\": \"coding\",\n      \"valueCoding\": {\n        \"system\": \"http://loinc.org\",\n        \"code\": \"697-3\"\n      }\n    },\n    {\n      \"name\": \"default-to-latest-version\",\n      \"valueBoolean\": true\n    },\n    {\n      \"name\": \"cache-id\",\n      \"valueId\": \"5a375c37-d208-4381-b8f7-409926dcf760\"\n    },\n    {\n      \"name\": \"profile\",\n      \"resource\": {\n        \"resourceType\": \"Parameters\",\n        \"parameter\": [\n          {\n            \"name\": \"profile-url\",\n            \"valueString\": \"http://hl7.org/fhir/ExpansionProfile/dc8fd4bc-091a-424a-8a3b-6198ef146891\"\n          }\n        ]\n      }\n    },\n    {\n      \"name\": \"mode\",\n      \"valueString\": \"lenient-display-validation\"\n    }\n  ]\n}\n</code></pre></p> <p>The response is similar to the previous one.</p> <p>The responsible code for these parts is <code>BaseWorkerContext.validateOnServer()</code>.</p> <p>A cache is also implemented with the parameter <code>cache-id</code>: within the same cache, the TX client does not need to  send a resource (ValueSet) again if it has already been sent.</p> <p>E.g. <pre><code>POST http://localhost:18002/eprik-cara/camel/tx/r4/ValueSet/$validate-code? HTTP/1.1\n</code></pre> <pre><code>{\n  \"resourceType\": \"Parameters\",\n  \"parameter\": [\n    {\n      \"name\": \"coding\",\n      \"valueCoding\": {\n        \"system\": \"http://loinc.org\",\n        \"code\": \"697-3\"\n      }\n    },\n    {\n      \"name\": \"default-to-latest-version\",\n      \"valueBoolean\": true\n    },\n    {\n      \"name\": \"url\",\n      \"valueUri\": \"http://fhir.ch/ig/ch-elm/ValueSet/ch-elm-expecting-specimen-specification--0|1.0.0\"\n    },\n    {\n      \"name\": \"cache-id\",\n      \"valueId\": \"a5ca9e93-2834-485b-9640-378503755211\"\n    },\n    {\n      \"name\": \"profile\",\n      \"resource\": {\n        \"resourceType\": \"Parameters\",\n        \"parameter\": [\n          {\n            \"name\": \"profile-url\",\n            \"valueString\": \"http://hl7.org/fhir/ExpansionProfile/dc8fd4bc-091a-424a-8a3b-6198ef146891\"\n          }\n        ]\n      }\n    }\n  ]\n}\n</code></pre> The parameter <code>url</code> points to a ValueSet that has been sent in a previous request, with the same <code>cache-id</code>.</p>"},{"location":"validation-investigations/#caching","title":"Caching","text":"<p>Code validation results are cached in a <code>TerminologyCache</code>. It can be disabled by putting <code>this.getContext().setCachingAllowed(false);</code> in the <code>MatchboxEngine</code> constructor.</p>"},{"location":"validation-tutorial/","title":"How to validate FHIR resources","text":"<p>This article shows, how FHIR resource can be validated and analyzed.</p> <p>Validation is a powerful tool to verify that you produce conformant FHIR resources, however the amount of error messages can be overwhelming if you have complex FHIR data structures like a FHIR IPS document (see validation result here).</p>"},{"location":"validation-tutorial/#what-does-a-validator-check","title":"What does a validator check","text":"<p>The validation tooling checks the following to verify that your FHIR resource is conformant on the following levels:</p> <ol> <li>Structure (Syntax) </li> <li>Semantics  </li> <li>Constraints by the FHIR Specification </li> <li>Constraints by FHIR Implementation Guides  </li> <li>Additional rules for FHIR implementation guides </li> <li>Slicing in FHIR documents</li> </ol> <p>You should fix first the structure errors, then the semantics error before you tackle the constraint errors.</p> <p>We will go through the different type of error messages to explain what possibilities you have to identify the errors.</p>"},{"location":"validation-tutorial/#using-matchbox-as-a-validation-tool","title":"Using matchbox as a validation tool","text":"<p>You can use matchbox as a validation tool with a GUI, a test instance is located at: http://test.ahdis.ch/matchboxv3/fhir. Alternatively matchbox offers a $validate operation and you can call this directly with a client. In this article we will use VSCode together with the RESTClient extension to show the different validation behaviors, you can open this file locally in your VS Code instance and then you can click on <code>Send Request</code>. As an alternative here is also a link for each validation provided which triggers the validation on the matchbox test instance.  </p> <p>To check if you have set it up correctly, perform a first successful validation: This should validate the XML Patient resource with a family name test against the Patient profile of the FHIR specification, in the test instance, the default validation is to FHIR Release R4:</p> <p>Validation Request with matchbox: <pre><code>@host = https://test.ahdis.ch/matchboxv3/fhir\nPOST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nAccept: application/fhir+json\nContent-Type: application/fhir+xml\n\n&lt;Patient xmlns=\"http://hl7.org/fhir\"&gt;\n  &lt;name&gt;\n    &lt;family value=\"Test\"/&gt;\n  &lt;/name&gt;\n&lt;/Patient&gt;\n</code></pre></p> <p>Validation response by matchbox: <pre><code>{\n  \"resourceType\": \"OperationOutcome\",\n  \"id\": \"75e89102282782b6c16df8acfb99310150a261ee35eed42c3b181b14d00a051e\",\n  \"issue\": [\n    {\n      \"severity\": \"information\",\n      \"code\": \"informational\",\n      \"diagnostics\": \"Validation for profile http://hl7.org/fhir/StructureDefinition/Patient|4.0.1 (2019-11-01T09:29:23+11:00). Loaded packages: hl7.fhir.r4.core#4.0.1, hl7.fhir.xver-extensions#4.0, hl7.terminology#5.4.0, hl7.fhir.uv.extensions.r4#1.0.0. Duration: 0.015s. powered by matchbox 3.9.3, hapi-fhir 7.4.0 and org.hl7.fhir.core 6.3.24. Validation parameters: CliContext{doNative=false, extensions=[any], hintAboutNonMustSupport=false, recursive=false, showMessagesFromReferences=false, doDebug=false, assumeValidRestReferences=false, canDoNative=false, noExtensibleBindingMessages=false, noUnicodeBiDiControlChars=false, noInvariants=false, displayIssuesAreWarnings=true, wantInvariantsInMessages=false, doImplicitFHIRPathStringConversion=false, htmlInMarkdownCheck=WARNING, txServer='https://test.ahdis.ch/matchboxv3/fhir', txServerCache='true', txLog='null', txUseEcosystem=true, lang='null', snomedCT='null', fhirVersion='4.0.1', ig='hl7.fhir.r4.core#4.0.1', questionnaireMode=CHECK, level=HINTS, mode=VALIDATION, securityChecks=false, crumbTrails=false, forPublication=false, allowExampleUrls=true, locale='en', locations={}, jurisdiction='urn:iso:std:iso:3166#US', igsPreloaded=[ch.fhir.ig.ch-elm#1.4.0], onlyOneEngine=false, xVersion=false, httpReadOnly=false}\"\n    },\n    {\n      \"severity\": \"information\",\n      \"code\": \"informational\",\n      \"diagnostics\": \"No fatal or error issues detected, the validation has passed\"\n    }\n  ]\n}\n</code></pre></p> <p>The validation response always contains a FHIR OperationOutcome Resource, with a list of different issues encountered during validation. One issue with severity information and code information will be always present with which configuration parameters the validation has been performed. Those parameters can change by different requests. The GUI of matchbox shows the exact same information in the results. If you have no fatal or error issues you will get another information issue with \"No fatal or error issues detected, the validation has passed\", meaning you passed the validation according to the specified profile!</p> Severity Code Diagnostics Expression information information No fatal or error issues detected, the validation has passed."},{"location":"validation-tutorial/#structure-syntax-issues","title":"Structure (Syntax) issues","text":"<p>You have to provide your FHIR resource in the right structure and syntax (xml or json) and also in the right FHIR version. If the validator is not able to parse your message as a FHIR resource (or as FHIR logical model instance, e.g. a CDA instance), you will get issues with a type of severity error or fatal.</p> <p>e.g. you will get back the following error for requesting an invalid Patient xml resource validation (just sending text instead):</p> <pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nAccept: application/fhir+json\nContent-Type: application/fhir+xml\n\nHello validator\n</code></pre> Severity Code Diagnostics Expression fatal invalid Content is not allowed in prolog. (xml) error invalid The XML encoding is invalid (must be UTF-8) XML <p>or an invalid Patient in a json validation:</p> <pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nAccept: application/fhir+json\nContent-Type: application/fhir+json\n\nHello validator\n</code></pre> Severity Code Diagnostics Expression fatal invalid Error parsing JSON: Error parsing JSON source: Unexpected content at start of JSON: String at Line 1 (path=[Hello])"},{"location":"validation-tutorial/#common-additional-xml-structure-issues","title":"Common additional XML Structure issues","text":""},{"location":"validation-tutorial/#not-providing-an-xml-namespace","title":"Not providing an xml namespace","text":"<p>example no xml namespace</p> <pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nAccept: application/fhir+json\nContent-Type: application/fhir+xml\n\n&lt;Patient&gt;\n  &lt;name&gt;\n    &lt;family value=\"Test\"/&gt;\n  &lt;/name&gt;\n&lt;/Patient&gt;\n</code></pre> Severity Code Diagnostics Expression fatal structure This content cannot be parsed (unknown or unrecognized XML Root element namespace/name 'noNamespace::Patient') \"Patient\""},{"location":"validation-tutorial/#wrong-xml-element-test-not-allowed","title":"Wrong XML element test (not allowed)","text":"<p>example undefined xml element <pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nContent-Type: application/fhir+xml\n\n&lt;Patient xmlns=\"http://hl7.org/fhir\"&gt;\n  &lt;test value=\"true\" /&gt;\n&lt;/Patient&gt;\n</code></pre> | Severity | Code       | Diagnostics                             | Expression   | |----------|------------|-----------------------------------------|--------------| | error    | structure  | Undefined element 'test' at /f:Patient\" | \"f:/Patient\" |</p>"},{"location":"validation-tutorial/#wrong-order-of-xml-elements","title":"Wrong order of xml elements","text":"<p>example wrong order <pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nContent-Type: application/fhir+xml\n\n&lt;Patient xmlns=\"http://hl7.org/fhir\"&gt;\n  &lt;gender value=\"male\" /&gt;\n  &lt;name&gt;\n    &lt;family value=\"Test\" /&gt;\n  &lt;/name&gt;\n&lt;/Patient&gt;\n</code></pre></p> Severity Code Diagnostics Expression error invalid As specified by profile http://hl7.org/fhir/StructureDefinition/Patient|4.0.1, Element 'name' is out of order (found after gender) Patient.name[0] <p>the gender element must be after the name.</p>"},{"location":"validation-tutorial/#common-json-structure-error-messages","title":"common JSON Structure error messages","text":""},{"location":"validation-tutorial/#json-array-for-0","title":"JSON Array for 0..*","text":"<p>If an element has a 0..* cardinality this needs in json representation an array. </p> <pre><code>{\n  \"resourceType\": \"Patient\",\n  \"active\" : true,\n  \"name\": [\n    {\n      \"family\": \"Test\"\n    }\n  ]\n}\n</code></pre> <p>sending it as as a key, object will give an error:</p> <pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nContent-Type: application/fhir+json\n\n{\n    \"resourceType\": \"Patient\",\n    \"name\": {\n      \"family\": \"Test\"\n    }\n}\n</code></pre> Severity Code Diagnostics Expression error invalid The property name must be a JSON Array, not an Object (at Patient) Patient.name"},{"location":"validation-tutorial/#boolean-or-numbers-not-quoted","title":"boolean or numbers not quoted","text":"<p>in JSON booleans or numbers must not be quoted as objects example:</p> <pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nContent-Type: application/fhir+json\n\n{\n  \"resourceType\": \"Patient\",\n  \"active\" : \"true\"\n}\n</code></pre> Severity Code Diagnostics Expression error invalid Error parsing JSON: the primitive value must be a boolean Patient.active"},{"location":"validation-tutorial/#cardinality","title":"Cardinality","text":"<p>The validator checks that the cardinality of all properties are correct, there can be min &amp; max requirements,  e.g. Patient.communication.language is required if you provide Patient.communication example:</p> <pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nContent-Type: application/fhir+json\n\n{\n  \"resourceType\": \"Patient\",\n  \"communication\" : [ {\n      \"preferred\": true\n    }\n  ]\n}\n</code></pre> Severity Code Diagnostics Expression error structure Patient.communication.language: minimum required = 1, but only found 0 (from http://hl7.org/fhir/StructureDefinition/Patient| 4.0.1) communication[0]"},{"location":"validation-tutorial/#value-domain","title":"Value Domain","text":"<p>The validator checks that all values of all properties conform to the rules for the specified types (including checking that enumerated codes are valid).</p>"},{"location":"validation-tutorial/#invalid-content-for-boolean","title":"invalid content for boolean","text":"<pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nContent-Type: application/fhir+json\n\n{\n  \"resourceType\": \"Patient\",\n  \"active\" : trueorfalse\n}\n</code></pre> Severity Code Diagnostics Expression error invalid The JSON property 'active' has no quotes around the value of the property 'trueorfalse' Patient error invalid Error parsing JSON: the primitive value must be a boolean Patient.active error invalid Boolean values must be 'true' or 'false' Patient.active"},{"location":"validation-tutorial/#semantic-validation","title":"Semantic validation","text":"<p>The validator checks also the validity of the codes and if the codes are appropriate for the bounded ValueSet according to the binding strength. For this a validator needs the support of a terminology server which provides a terminology service. </p> <p>matchbox can use different terminology severs: - tx.fhir.org which is the default terminology sever used by the FHIR validator - Ontoserver as of version 6.15.0  - matchbox provides an internal terminology server, but this internal terminology server has only limited terminology capabilities, e.g. it will not validate display names or it can't expand intensional ValueSets.</p>"},{"location":"validation-tutorial/#invalid-code-for-gender","title":"invalid code for gender","text":"<p>example <pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nContent-Type: application/fhir+json\n\n{\n  \"resourceType\": \"Patient\",\n  \"gender\" : \"?\"\n}\n</code></pre></p> Severity Code Diagnostics Expression error code-invalid The value provided ('?') was not found in the value set 'AdministrativeGender' (http://hl7.org/fhir/ValueSet/administrative-gender|4.0.1), and a code is required from this value set  (error message = The System URI could not be determined for the code '?' in the ValueSet 'http://hl7.org/fhir/ValueSet/administrative-gender|4.0.1'; The provided code '#?' was not found in the value set 'http://hl7.org/fhir/ValueSet/administrative-gender|4.0.1') Patient.gender"},{"location":"validation-tutorial/#intensional-valueset","title":"intensional ValueSet","text":"<p>ValueSets can be intensional which requires a terminology server to expand them or verify if a code is valid within. E.g. see Caveat Condition where the ValueSet includes codes from http://snomed.info/sct where concept is-a 397578001 (Device in situ (finding)).</p> <p>validation with tx.fhir.org:</p> Severity Code Diagnostics Expression error code-invalid Unknown code '444444444' in the CodeSystem 'http://snomed.info/sct' version 'http://snomed.info/sct/900000000000207008/version/20240801' Condition.code.coding[0].code error code-invalid None of the codings provided are in the value set 'Caveat Condition' (http://fhir.ch/ig/ch-rad-order/ValueSet/ch-rad-order-caveat-condition|2.0.0-ballot), and a coding from this value set is required) (codes = http://snomed.info/sct#444444444)\" Condition.code <p>validation with matchbox's internal terminology server will not return an error, because the intensional ValueSet will be ignored and there is no validation of codes from SNOMED CT or LOINC (CodeSystems not provided directly through the HL7 FHIR ecosystem).</p>"},{"location":"validation-tutorial/#constraints-by-the-fhir-specification","title":"Constraints by the FHIR Specification","text":"<p>FHIR adds additional constraints to resources, e.g: https://hl7.org/fhir/patient.html#invs adds a requirement that a contact should have at least a contact's details or a reference to an organization (name.exists() or telecom.exists() or address.exists() or organization.exists()). example</p> <pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nContent-Type: application/fhir+json\n\n{\n    \"resourceType\": \"Patient\",\n   \"contact\" : [{\n    \"relationship\" : [{\n      \"coding\" : [\n      {\n        \"system\" : \"http://terminology.hl7.org/CodeSystem/v2-0131\",\n        \"code\" : \"N\"\n      }\n      ]\n    }]\n  }]\n}\n</code></pre> Severity Code Diagnostics Expression error invariant Constraint failed: pat-1: 'SHALL at least contain a contact's details or a reference to an organization' Patient.contact[0]"},{"location":"validation-tutorial/#constraints-by-fhir-implementation-guides","title":"Constraints by FHIR Implementation Guides","text":""},{"location":"validation-tutorial/#additional-rules-for-fhir-implementation-guides","title":"Additional rules for FHIR implementation guides","text":"<p>FHIR Implementation guides can add additional rules and you can validate if those rules are checked, by specifying the profile for the validation where the rules are defined:</p> <p>e.g. in FHIR CH Core it is defined that CH Core Patient EPR is required to have at least one identifier, name and birthDate. If you validate an empty patient resource against the base profile you wont get any errors:</p> <pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/StructureDefinition/Patient HTTP/1.1\nContent-Type: application/fhir+json\n\n{\n    \"resourceType\": \"Patient\"\n}\n</code></pre> Severity Code Diagnostics Expression information information No fatal or error issues detected, the validation has passed. <p>however if you validate it against CH Core Patient EPR  you will get multiple errors:</p> <pre><code>POST {{host}}/$validate?profile=http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-patient-epr HTTP/1.1\nContent-Type: application/fhir+json\n\n{\n    \"resourceType\": \"Patient\"\n}\n</code></pre> Severity Code Diagnostics Expression error structure Patient.identifier: minimum required = 1, but only found 0 (from http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-patient-epr|5.0.0-ballot) Patient error structure Patient.gender: minimum required = 1, but only found 0 (from http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-patient-epr|5.0.0-ballot) Patient error structure Patient.birthDate: minimum required = 1, but only found 0 (from http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-patient-epr|5.0.0-ballot) Patient"},{"location":"validation-tutorial/#slicing-in-fhir-documents","title":"Slicing in FHIR documents","text":"<p>One common feature of constraining FHIR documents (FHIR resource Bundle with type document) is to specify a document profile (e.g. IPS). The document profile will then specify the entries which are allowed to appear. </p> <p>In a FHIR document the first resource entry needs to be a FHIR Resource Composition, for a specific FHIR document there will be a profile for this Composition (e.g IPS Composition, followed by other resources. </p> <p>This is expressed with slicing, the Bundle.entry elements are sliced and the document profile says which resources are to be expected in this bundle.entry elements (e.g. at least that Composition defined above). Usually this slices are done on resource/profile and specifying that the Composition needs to appear. For IPS it requires also a Patient resource and defines profiles for optional resources according to the IPS requirements).</p> <p>A FHIR document has different sections (usually coded by a LOINC code) defined in the Composition resource, and within those sections you will have references to structured FHIR resources, which will be contained in Bundle.entry. This means that the Composition is broken into sections, slice by pattern:code. The IPS has required slices for sectionMedications, sectionAllergies and section Problems.</p> <p>A minimal IPS document validation looks like this:</p> <p>example <pre><code>POST {{host}}/$validate?profile=http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips HTTP/1.1\nContent-Type: application/fhir+json\n\n{\n    \"resourceType\": \"Bundle\",\n    \"identifier\": {\n        \"system\": \"urn:oid:2.16.724.4.8.10.200.10\",\n        \"value\": \"28b95815-76ce-457b-b7ae-a972e527db40\"\n    },\n    \"type\": \"document\",\n    \"timestamp\": \"2020-12-11T14:30:00+01:00\",\n    \"entry\": [\n        {\n            \"fullUrl\": \"urn:uuid:f40b07e3-37e8-48c3-bf1c-ae70fe12dab0\",\n            \"resource\": {\n                \"resourceType\": \"Composition\",\n                \"id\": \"f40b07e3-37e8-48c3-bf1c-ae70fe12dab0\",\n                \"status\": \"final\",\n                \"type\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://loinc.org\",\n                            \"code\": \"60591-5\",\n                            \"display\": \"Patient summary Document\"\n                        }\n                    ]\n                },\n                \"subject\": {\n                    \"reference\": \"urn:uuid:244ad7c3-beeb-41d1-8a2f-c76b8cf720ad\"\n                },\n                \"date\": \"2020-12-11T14:30:00+01:00\",\n                \"author\": [\n                    {\n                        \"reference\": \"urn:uuid:45271f7f-63ab-4946-970f-3daaaa06637f\"\n                    }\n                ],\n                \"title\": \"Patient Summary as of December 11, 2020 14:30\",\n                \"confidentiality\": \"N\",\n                \"section\": [\n                    {\n                        \"title\": \"Active Problems\",\n                        \"code\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"http://loinc.org\",\n                                    \"code\": \"11450-4\",\n                                    \"display\": \"Problem list - Reported\"\n                                }\n                            ]\n                        },\n                        \"text\": {\n                            \"status\": \"generated\",\n                            \"div\": \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;&lt;b&gt;Condition Name&lt;/b&gt;: Menopausal Flushing&lt;/div&gt;&lt;div&gt;&lt;b&gt;Code&lt;/b&gt;: &lt;span&gt;198436008&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Status&lt;/b&gt;: &lt;span&gt;Active&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;\"\n                        },\n                        \"entry\": [\n                            {\n                                \"reference\": \"urn:uuid:d179321e-c091-4cd4-8642-3a27537d506d\"\n                            }\n                        ]\n                    },\n                    {\n                        \"title\": \"Medication\",\n                        \"code\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"http://loinc.org\",\n                                    \"code\": \"10160-0\",\n                                    \"display\": \"History of Medication use Narrative\"\n                                }\n                            ]\n                        },\n                        \"text\": {\n                            \"status\": \"generated\",\n                            \"div\": \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;&lt;b&gt;Medication Name&lt;/b&gt;: Oral anastrozole 1mg tablet&lt;/div&gt;&lt;div&gt;&lt;b&gt;Code&lt;/b&gt;: &lt;span&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Status&lt;/b&gt;: &lt;span&gt;Active, started March 2015&lt;/span&gt;&lt;/div&gt;&lt;div&gt;Instructions: Take 1 time per day&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;\"\n                        },\n                        \"entry\": [\n                            {\n                                \"reference\": \"urn:uuid:e1271efd-18ff-4654-9ee7-45f40019c453\"\n                            }\n                        ]\n                    },\n                    {\n                        \"title\": \"Allergies and Intolerances\",\n                        \"code\": {\n                            \"coding\": [\n                                {\n                                    \"system\": \"http://loinc.org\",\n                                    \"code\": \"48765-2\",\n                                    \"display\": \"Allergies and adverse reactions Document\"\n                                }\n                            ]\n                        },\n                        \"text\": {\n                            \"status\": \"generated\",\n                            \"div\": \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;&lt;ul&gt;&lt;li&gt;&lt;div&gt;&lt;b&gt;Allergy Name&lt;/b&gt;: Pencillins&lt;/div&gt;&lt;div&gt;&lt;b&gt;Verification Status&lt;/b&gt;: Confirmed&lt;/div&gt;&lt;div&gt;&lt;b&gt;Reaction&lt;/b&gt;: &lt;span&gt;no information&lt;/span&gt;&lt;/div&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;\"\n                        },\n                        \"entry\": [\n                            {\n                                \"reference\": \"urn:uuid:74861316-f69d-4652-9fb1-8512a20c7927\"\n                            }\n                        ]\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"urn:uuid:244ad7c3-beeb-41d1-8a2f-c76b8cf720ad\",\n            \"resource\": {\n                \"resourceType\": \"Patient\",\n                \"id\": \"244ad7c3-beeb-41d1-8a2f-c76b8cf720ad\",\n                \"name\": [\n                    {\n                        \"family\": \"DeLarosa\",\n                        \"given\": [\n                            \"Martha\"\n                        ]\n                    }\n                ],\n                \"birthDate\": \"1972-05-01\"\n            }\n        },\n        {\n            \"fullUrl\": \"urn:uuid:45271f7f-63ab-4946-970f-3daaaa06637f\",\n            \"resource\": {\n                \"resourceType\": \"Practitioner\",\n                \"id\": \"45271f7f-63ab-4946-970f-3daaaa06637f\",\n                \"name\": [\n                    {\n                        \"family\": \"van Hulp\",\n                        \"given\": [\n                            \"Beetje\"\n                        ]\n                    }\n                ]\n            }\n        },\n        {\n            \"fullUrl\": \"urn:uuid:d179321e-c091-4cd4-8642-3a27537d506d\",\n            \"resource\": {\n                \"resourceType\": \"Condition\",\n                \"id\": \"d179321e-c091-4cd4-8642-3a27537d506d\",\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://snomed.info/sct\",\n                            \"code\": \"198436008\",\n                            \"display\": \"Menopausal flushing (finding)\"\n                        }\n                    ]\n                },\n                \"subject\": {\n                    \"reference\": \"urn:uuid:244ad7c3-beeb-41d1-8a2f-c76b8cf720ad\"\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"urn:uuid:e1271efd-18ff-4654-9ee7-45f40019c453\",\n            \"resource\": {\n                \"resourceType\": \"MedicationStatement\",\n                \"id\": \"e1271efd-18ff-4654-9ee7-45f40019c453\",\n                \"status\": \"active\",\n                \"medicationReference\": {\n                    \"reference\": \"urn:uuid:95db7c92-566a-4ded-896b-2220ab244a9e\"\n                },\n                \"subject\": {\n                    \"reference\": \"urn:uuid:244ad7c3-beeb-41d1-8a2f-c76b8cf720ad\"\n                },\n                \"effectivePeriod\": {\n                    \"start\": \"2015-03\"\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"urn:uuid:95db7c92-566a-4ded-896b-2220ab244a9e\",\n            \"resource\": {\n                \"resourceType\": \"Medication\",\n                \"id\": \"95db7c92-566a-4ded-896b-2220ab244a9e\",\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://snomed.info/sct\",\n                            \"code\": \"108774000\",\n                            \"display\": \"Product containing anastrozole (medicinal product)\"\n                        }\n                    ]\n                }\n            }\n        },\n        {\n            \"fullUrl\": \"urn:uuid:74861316-f69d-4652-9fb1-8512a20c7927\",\n            \"resource\": {\n                \"resourceType\": \"AllergyIntolerance\",\n                \"id\": \"74861316-f69d-4652-9fb1-8512a20c7927\",\n                \"clinicalStatus\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical\",\n                            \"code\": \"active\"\n                        }\n                    ]\n                },\n                \"code\": {\n                    \"coding\": [\n                        {\n                            \"system\": \"http://snomed.info/sct\",\n                            \"code\": \"373270004\",\n                            \"display\": \"Substance with penicillin structure and antibacterial mechanism of action (substance)\"\n                        }\n                    ]\n                },\n                \"patient\": {\n                    \"reference\": \"urn:uuid:244ad7c3-beeb-41d1-8a2f-c76b8cf720ad\"\n                }\n            }\n        }\n    ]\n}\n</code></pre></p>"},{"location":"validation-tutorial/#invalid-ips-document-missing-medication-section","title":"Invalid IPS document: missing medication section","text":"<p>If we remove the medication section and medication entries (which are required by the IPS Composition profile), we get an error and additional information:</p> <p>example</p> <p>error [structure]: line 1, column 2, in Bundle: Slice 'Bundle.entry:composition': a matching slice is required, but not found (from http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips|2.0.0-ballot). Note that other slices are allowed in addition to this required slice</p> <p>This error says that the IPS composition could not be found, we have to look for further information why this was not found: </p> <p>information [informational]: line 10, column 10, in Bundle.entry[0]: This element does not match any known slice defined in the profile http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips|2.0.0-ballot (this may not be a problem, but you should check that it's not intended to match a slice) 1. Bundle.entry[0]: Bundle.entry[0].resource: Composition.section: minimum required = 3, but only found 2 (from http://hl7.org/fhir/uv/ips/StructureDefinition/Composition-uv-ips|2.0.0-ballot) 2. Bundle.entry[0]: Bundle.entry[0].resource: Slice 'Composition.section:sectionMedications': a matching slice is required, but not found (from http://hl7.org/fhir/uv/ips/StructureDefinition/Composition-uv-ips|2.0.0-ballot). Note that other slices are allowed in addition to this required slice</p> <p>The information indicates that the slicing conditions (minimum 3 sections are not met) and that the sectionMedications is required but not found.</p>"},{"location":"validation-tutorial/#invalid-ips-document-missing-patientbirthdate","title":"Invalid IPS document: missing Patient.birthDate","text":"<p>example</p> <p>If we remove the patient birhtDate (which is required by the IPS Patient profile), we get two errors and a huge list of information issues:</p> <p>error [structure]: line 1, column 2, in Bundle: Slice 'Bundle.entry:composition': a matching slice is required, but not found (from http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips|2.0.0-ballot). Note that other slices are allowed in addition to this required slice</p> <p>This error says that the IPS composition could not be found, we have to look for further information why this was not found. </p> <p>error [structure]: line 1, column 2, in Bundle: Slice 'Bundle.entry:patient': a matching slice is required, but not found (from http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips|2.0.0-ballot). Note that other slices are allowed in addition to this required slice</p> <p>This indicates that the validator did not find a corresponding patient but we have to look further why this is not the case.</p> <p>information [informational]: line 10, column 10, in Bundle.entry[0]: This element does not match any known slice defined in the profile http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips|2.0.0-ballot (this may not be a problem, but you should check that it's not intended to match a slice) 1. Bundle.entry[0]: Bundle.entry[0].resource.subject: Bundle.entry[1].resource/Patient/244ad7c3-beeb-41d1-8a2f-c76b8cf720ad/: Patient.birthDate: minimum required = 1, but only found 0 (from http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips|2.0.0-ballot) 2. Bundle.entry[0]: Bundle.entry[0].resource.section[0].entry[0]: Bundle.entry[0].resource.section[0].entry[0]: Bundle.entry[3].resource.subject: Bundle.entry[1].resource/Patient/244ad7c3-beeb-41d1-8a2f-c76b8cf720ad/: Patient.birthDate: minimum required = 1, but only found 0 (from http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips|2.0.0-ballot) 3. Bundle.entry[0]: Bundle.entry[0].resource.section[1].entry[0]: Bundle.entry[0].resource.section[1].entry[0]: Bundle.entry[4].resource.subject: Bundle.entry[1].resource/Patient/244ad7c3-beeb-41d1-8a2f-c76b8cf720ad/: Patient.birthDate: minimum required = 1, but only found 0 (from http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips|2.0.0-ballot) 4. Bundle.entry[0]: Bundle.entry[0].resource.section[2].entry[0]: Bundle.entry[0].resource.section[2].entry[0]: Bundle.entry[6].resource.patient: Bundle.entry[1].resource/Patient/244ad7c3-beeb-41d1-8a2f-c76b8cf720ad/: Patient.birthDate: minimum required = 1, but only found 0 (from http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips|2.0.0-ballot)</p> <p>Here we see why the Composition did not match the slice, Composition.subject points to Patient, where the birthDate is not provided, in additions also in the referenced resources out of the sections have references to the patient which is not conforming to the IPS Patient profile.</p> <p>information [informational]: line 103, column 10, in Bundle.entry[1]: This element does not match any known slice defined in the profile http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips|2.0.0-ballot (this may not be a problem, but you should check that it's not intended to match a slice) 1. Bundle.entry[1]: Bundle.entry[1].resource/Patient/244ad7c3-beeb-41d1-8a2f-c76b8cf720ad/: Patient.birthDate: minimum required = 1, but only found 0 (from http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips|2.0.0-ballot)</p> <p>Here we see that the Patient would need to have birthDate that is missing to conform to the profile.</p> <p>information [informational]: line 133, column 10, in Bundle.entry[3]: This element does not match any known slice defined in the profile http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips|2.0.0-ballot (this may not be a problem, but you should check that it's not intended to match a slice) 1. Bundle.entry[3]: Bundle.entry[3].resource.subject: Bundle.entry[1].resource/Patient/244ad7c3-beeb-41d1-8a2f-c76b8cf720ad/: Patient.birthDate: minimum required = 1, but only found 0 (from http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips|2.0.0-ballot)</p> <p>information [informational]: line 152, column 10, in Bundle.entry[4]: This element does not match any known slice defined in the profile http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips|2.0.0-ballot (this may not be a problem, but you should check that it's not intended to match a slice) 1. Bundle.entry[4]: Bundle.entry[4].resource.subject: Bundle.entry[1].resource/Patient/244ad7c3-beeb-41d1-8a2f-c76b8cf720ad/: Patient.birthDate: minimum required = 1, but only found 0 (from http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips|2.0.0-ballot)</p> <p>information [informational]: line 185, column 10, in Bundle.entry[6]: This element does not match any known slice defined in the profile http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips|2.0.0-ballot (this may not be a problem, but you should check that it's not intended to match a slice) 1. Bundle.entry[6]: Bundle.entry[6].resource.patient: Bundle.entry[1].resource/Patient/244ad7c3-beeb-41d1-8a2f-c76b8cf720ad/: Patient.birthDate: minimum required = 1, but only found 0 (from http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips|2.0.0-ballot)</p> <p>The validator can us not tell directly that Patient.birthDate is missing, it could have other Patient in the Bundle. The validator tells us that a Composition and a Patient according to the IPS definitions could not be found and we have to figure out ourself why they did not match.</p>"},{"location":"validation/","title":"Validation of FHIR resources","text":"<p>matchbox can validate FHIR resources if they are conform to the FHIR R4/R4B or R5 specification and conform to the requirements of specific implementation guides.</p> <p>a tutorial how to validate FHIR resources and to what error message you have to look out for is availabe here.</p> <p>Validation is based on the official HL7 Java reference validator in accordance with the provided terminologies. An external terminology server can also be configured, and you can validate your implementation through the $validate operation with the FHIR API or through a simple GUI.</p>"},{"location":"validation/#matchbox-engine","title":"matchbox engine","text":"<p>see matchbox-engine for using the validation functionality as a library.</p>"},{"location":"validation/#matchbox","title":"matchbox","text":""},{"location":"validation/#fhir-api","title":"FHIR API","text":"<p>For the $validate operation on the server, see the OperationDefinition for validation support: [server]/$validate for checking FHIR  resources conforming to the loaded implementation guides.</p> Parameter IN Card Description resource 1..1 The resource (or logical instance) to validate, needs to be provided in the HTTP Body, the HTTP Content-Type header needs to be indicated if it is application/fhir+json or application/fhir+xml profile 1..1 profile to validate the resources against. Within the profile parameter, the targetProfile returns all profiles possible to use for validation, with the canonical url, and with the canonical url and the business version of the profile ig 0..1 the Implementation Guide and version which should be used for validation, eg. ch.fhir.ig.ch-core#3.0.0 <p>The operation returns an array of OperationOutcome with severity defined as fatal, error, warning or information.</p> <p>The first entry will contain the information in what configuration the validation was performed, e.g:</p> <pre><code>Validation for profile http://fhir.ch/ig/ch-core/StructureDefinition/ch-core-patient|3.0.0 (2018-10-15T00:00:00+10:00) with packages: hl7.fhir.xver-extensions#0.0.13, hl7.fhir.r4.core#4.0.1, hl7.terminology#5.1.0, ihe.formatcode.fhir#1.1.0, ch.fhir.ig.ch-epr-term#2.0.8, ch.fhir.ig.ch-core#3.0.0 No Issues detected. Total: 4430ms powered by matchbox-engine 3.1.0, hapi-fhir 6.2.5 and org.hl7.fhir.core 5.6.92 validation parameters Parameters {doNative=false, hintAboutNonMustSupport=false, recursive=false, doDebug=false, assumeValidRestReferences=false, canDoNative=false, noExtensibleBindingMessages=false, noUnicodeBiDiControlChars=false, noInvariants=false, wantInvariantsInMessages=false, txServer='http://tx.fhir.org', lang='null', snomedCT='900000000000207008', targetVer='null', ig=ch.fhir.ig.ch-core#3.0.0, questionnaireMode=CHECK, level=HINTS, mode=VALIDATION, securityChecks=false, crumbTrails=false, forPublication=false, jurisdiction=urn:iso:std:iso:3166#US, allowExampleUrls=false, locale='English', locations={}}\n</code></pre>"},{"location":"validation/#configuration-parameters","title":"configuration parameters","text":"<p>Default validation parameters can be set directly in provided application.yaml</p> <pre><code>hapi:\n  fhir:\n    implementationguides:\n      fhir_r4_core:\n        name: hl7.fhir.r4.core\n        version: 4.0.1\n        url: classpath:/hl7.fhir.r4.core.tgz\n      fhir_terminology:\n        name: hl7.terminology.r4\n        version: 6.1.0\n        url: classpath:/hl7.terminology.r4#6.1.0.tgz\n      fhir_extensions:\n        name: hl7.fhir.uv.extensions.r4\n        version: 1.0.0\n        url: classpath:/hl7.fhir.uv.extensions.r4#1.0.0.tgz\n      cda:\n        name: ch.fhir.ig.cda-fhir-maps\n        version: 0.3.0\n        url: https://fhir.ch/ig/cda-fhir-maps/package.tgz\n      chemd:\n        name: ch.fhir.ig.ch-emed\n        version: 4.0.1\nmatchbox:\n  fhir:\n    context:\n      fhirVersion: 4.0.1\n      txServer: n/a\n      #      onlyOneEngine: true\n      #      xVersion : false\n      #      igsPreloaded: ch.fhir.ig.ch-core#4.0.0-ballot\n      #      autoInstallMissingIgs: true\n      suppressWarnInfo:\n        hl7.fhir.r4.core#4.0.1:\n        #- \"Constraint failed: dom-6:\"\n</code></pre> Parameter Card Description implementationguides 0..* the Implementation Guide and version which with which matchbox will be configured, you can provide by classpath, file, http address, if none is specified the FHIR package servers will be used (need to be online) txServer 0..1 txServer to use, n/a if none (default), http://localhost:8080/fhir for internal (if server.port in application.yaml is 8080), http://tx.fhir.org for hl7 validator txUseEcosystem 0..1 boolean true if none (default), if true asks tx servers for which CodeSystem they are authorative txServerCache 0..1 boolean if respones are cached, true  if none (default) txLog 0..1 string indicating file location of log (end either in .txt or .html, default no logging igsPreloaded 0..* For each mentioned ImplementationGuide (comma separated) an engine will be created, which will be cached in memory as long the application is running. Other IG's will created on demand and will be cached for an hour for subsequent calls. Tradeoff between memory consumption and first response time (creating of engine might have duration of half a minute). Default no igs are preloaded. onlyOneEngine 0..1 Implementation Guides can have multiple versions with different dependencies. Matchbox creates for transformation and validation an own engine for each Implementation Guide and its dependencies (default setting). You can switch this behavior, e.g. if you are using it in development and want to create and update resources or transform maps. Set the setting for onlyOneEngine to true. The changes are however not persisted and will be lost if matchbox is restarted. httpReadOnly 0..1 Whether to allow creating, modifying or deleting resources on the server via the HTTP API or not. If <code>true</code>, IGs can only be loaded through the configuration. suppressWarnInfo 0..* A list of warning message to ignore while validating resources, per Implementation Guide and version. extensions 0..1 Extensions not defined by the ImplementationgGuides which are accepted, comma separted list by url patterns, defaults to 'any' autoInstallMissingIgs 0..1 Whether to automatically install IGs from the public registry if they are not installed. Default to <code>false</code>."},{"location":"validation/#suppress-warninginformation-level-issues-in-validation","title":"Suppress warning/information-level issues in validation","text":"<p>The validation client can suppress warning/information-level issues that are not relevant for the validation. Validation issues to be suppressed are defined in the configuration file, per Implementation Guide and version.</p> <p>To match by exact substring, simply add the message to the list. To match by regex pattern, add the prefix <code>regex:</code> to the message.</p> <p>Example of configuration file: <pre><code>matchbox:\n  fhir:\n    context:\n      suppressWarnInfo:\n        hl7.fhir.r4.core#4.0.1:\n          - \"Constraint failed: dom-6:\"\n        ch.fhir.ig.ch-elm#1.0.0:\n          - \"regex:Binding for path (.+).ofType\\(Coding\\) has no source, so can't be checked\"\n</code></pre></p>"},{"location":"validation/#gazelle-evs-api","title":"Gazelle EVS API","text":"<p>To integrate Matchbox in the IHE Gazelle Testing Platform, the  EVS API has also been implemented. See the  validation-service-api project for the existing  documentation.</p> <p>The list of available profiles is available at [server]/gazelle/validation/profiles, and the  validation request is sent to <code>POST [server]/gazelle/validation/validate</code>.</p> <p>To configure a Matchbox instance in the EVSClient, the following actions shall be done:</p> <ol> <li>In <code>Administration \u2192 Validations services</code>, create a new validation service with the following parameters:<ul> <li>Validator Type: DEFAULT</li> <li>Name: as you want</li> <li>Stylesheet report location: any value will do</li> <li>Target endpoint: [server]/gazelle</li> <li>Support compression: YES</li> <li>Is available: YES</li> <li>Example screenshot</li> </ul> </li> <li>In <code>Administration \u2192 Referenced standards</code>, create a new standard:<ul> <li>Display name: as you want</li> <li>Validator Type: DEFAULT</li> <li>Validation filter: optional, can be used to filter the profiles by their IG identifier. E.g. ch.fhir.ig.ch-core</li> <li>In Available validation services, add the previously created validation service by clicking on the \"plus\" icon.</li> <li>Example screenshot</li> </ul> </li> <li>In <code>Administration \u2192 Menu Configuration</code>, add your new standard to an existing menu.<ul> <li>Example screenshot</li> </ul> </li> <li>You can now validate your resource, the new standard appears in the menu.</li> </ol>"},{"location":"validation/#terminology-server","title":"Terminology server","text":"<p>A terminology server may be used to validate resources. It is useful for the following reasons:</p> <ul> <li>to validate that a code/coding/codeableConcept is within a complex ValueSet (see under for examples of complex    ValueSets);</li> <li>to validate that a code/coding/codeableConcept exists in its code system, when the code system is not locally    defined (e.g. SNOMED CT, LOINC, ISOs, etc.).</li> </ul> <p>A complex value set (in that context) is a value set that uses filters to define its content instead of declaring  each code. All value set filters would make a value set too  complex for the validation client to process the value set expansion by itself.</p> <p>Matchbox-server comes with an internal terminology server. It tries to expand the value sets if possible, or simply returns success to validation requests.  To use it, you can set the terminology server URL to the one of the matchbox-server instance, e.g.  http://localhost:8080/fhir.</p> <p>Please be aware that by using the internal terminology server, the validation may be incomplete. Its use case is simple:</p> <ul> <li>all CodeSystems that are used are defined in the IG, or is a special CodeSystem supported by HAPI-FHIR;</li> <li>in your resources, all important code/coding/codeableConcept are bound to a simple value set, with 'required'    strength.</li> </ul> <p>Please be aware that if you have unbound code/coding/codeableConcepts, or the binding is not 'required', the  code/coding/codeableConcept will be considered valid if the code system is not defined locally (e.g. SNOMED CT,  LOINC, etc).</p>"},{"location":"validation/#gui","title":"GUI","text":"<p>You can run a validation through the GUI by using the fragment in the URL. The fragment is the part of the URL that starts with a <code>#</code> character (also called the hash or anchor). The different parameters shall be set as if they were in the query string: <code>/matchbox/validate#resource=...&amp;profile=...</code>.</p> <p>The following parameters are supported:</p> Parameter Description <code>resource</code> The resource to validate, encoded as base64url. Required. <code>profile</code> The profile to use for validation. Optional. Other parameters Any parameter supported by the FHIR API or the <code>CliContext</code>. Optional. <p>The only required parameter is <code>resource</code>. If <code>profile</code> is not provided, it will default to <code>http://hl7.org/fhir/StructureDefinition/{resourceType}</code>.</p> <p>E.g. <pre><code>GET https://test.ahdis.ch/matchboxv3/validate#profile=http%3A%2F%2Fhl7.org%2Ffhir%2FStructureDefinition%2FBundle&amp;txServer=http://tx.fhir.org/r4&amp;resource=PFBhdGllbnQgeG1sbnM9Imh0dHA6Ly9obDcub3JnL2ZoaXIiPgogIDxuYW1lPgogICAgPGZhbWlseSB2YWx1ZT0iVGVzdCIvPgogIDwvbmFtZT4KPC9QYXRpZW50Pg HTTP/1\n</code></pre></p>"}]}